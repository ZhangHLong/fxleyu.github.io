---
layout   : post
title    : "学习《架构整洁之道》"
date     : 2020-05-16 15:23:00
author   : fxleyu
tags:
    - 架构
---

## 30 数据库只是实现细节
从系统架构道的角度来看，数据库并不重要——它只是一个实现细节，在系统架构中并不占据重要角色。

数据库只是一款软件，是用来存取数据的工具。从系统架构的角度来看，工具通常是无关紧要的——因为这只是一个底层的实现细节，一个达成目标的手段。一个优秀的架构师是不会让实现细节污染整个系统架构的。

但不管关系型数据库的设计有多么有智慧、多么精巧、多么符合数学原理，它仍然也只是一种技术。换句话说，它终究只是一种实现细节。

数据库流行是因为硬盘访问数据慢导致的。

为了应对硬盘访问速度带来的限制，必须使用索引、缓存以及查询优化器等技术。同时，我们还需要一种数据的标准展现格式，以便让索引、缓存及查询优化器来使用。概括来说，我们需要的就是某种数据访问与管理系统。现在流行的两种系统为：文件系统与关系型数据库系统（RDBMS）。
- 文件系统是基于文档格式的，它提供的是一种便于存储整个文档的方式。
- 数据库系统则主要关注的是内容，它提供的是一种便于进行内容检索的存储方式。其最擅长的就是根据某些共同属性而检索一系列记录。

这两种系统都是为了优化磁盘存储而设计的，人们需要根据它们的特点来将数据组织成最便于访问的模式。每个系统都有一套索引和安排数据的方式。同时，每种系统最终都会将数据缓存在内存中，方便快速操作。

从系统架构的视角来看，真的不应该关心数据在旋转的磁盘表面上以什么样格式存在。实际上，软件架构应该对磁盘本身的存在完全不关心。

性能难道不是系统架构的一个考量标准吗？当然是——但当问题设计数据存储时，这方便的操作通常是被封装起来，隔离业务逻辑之外的。也就是说，我们确实需要从数据存储中快速地存取数据，但这终究只是一个底层实现问题。我们完全可以在数据访问这一较低的层面上解决这个问题，而不需要让它与系统架构相关联。


### 本章小结
数据的组织结构，数据的模型，都是系统架构中的重要部分，但是从磁盘上存储/读取数据的机制和手段却没那么重要。关系型数据库强制我们将数据存储成表格并且以 SQL 访问，主要是为了后者。总而言之，数据本身很重要，但数据库系统仅仅是一个实现细节。
